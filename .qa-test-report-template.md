# QA Test Report — CRE CLI

> Copy this file to `.qa-test-report-YYYY-MM-DD.md` before starting a test run.
> Fill in each section as you execute the runbook.

---

## Run Metadata

| Field | Value |
| ----- | ----- |
| Date | _YYYY-MM-DD_ |
| Tester | _Name / GitHub handle_ |
| Branch | _e.g. feature/dynamic-templates_ |
| Commit | _e.g. f12da0a_ |
| OS | _e.g. macOS 15.3 arm64 / Ubuntu 24.04 x86_64_ |
| Terminal | _e.g. iTerm2 3.5, VS Code 1.96, Terminal.app_ |
| Go Version | _output of `go version`_ |
| Node Version | _output of `node --version`_ |
| Bun Version | _output of `bun --version`_ |
| Anvil Version | _output of `anvil --version`_ |
| CRE Environment | _PRODUCTION / STAGING / DEVELOPMENT_ |

---

## How to Use This Report

For every test case:

1. Set **Status** to one of: `PASS`, `FAIL`, `SKIP`, `BLOCKED`
2. For `FAIL` or `BLOCKED`: add a **Code** from the failure taxonomy (see `reporting-rules.md`)
3. Paste relevant **command output** in the Evidence block (truncate long output, keep first/last 10 lines)
4. For `FAIL`: describe what happened vs. what was expected in **Notes**
5. For `SKIP`/`BLOCKED`: explain why in **Notes**

---

## 2. Build & Smoke Test

### 2.1 Build

```
Status: ___
Command: make build
```

<details>
<summary>Evidence (click to expand)</summary>

```
<paste terminal output here>
```

</details>

Notes: ___

### 2.2 Smoke Tests

| # | Command | Status | Notes |
| - | ------- | ------ | ----- |
| 1 | `./cre --help` | ___ | ___ |
| 2 | `./cre version` | ___ | ___ |
| 3 | `./cre init --help` | ___ | ___ |
| 4 | `./cre workflow --help` | ___ | ___ |
| 5 | `./cre secrets --help` | ___ | ___ |
| 6 | `./cre account --help` | ___ | ___ |
| 7 | `./cre login --help` | ___ | ___ |
| 8 | `./cre whoami --help` | ___ | ___ |
| 9 | `./cre nonexistent` | ___ | ___ |

---

## 3. Unit & E2E Test Suite

### 3.1 Linting

```
Status: ___
Code: ___
Command: make lint
```

<details>
<summary>Evidence</summary>

```
<paste output here>
```

</details>

Notes: ___

### 3.2 Unit Tests

```
Status: ___
Code: ___
Command: make test
Total: ___ passed / ___ failed / ___ skipped
Duration: ___
```

<details>
<summary>Evidence</summary>

```
<paste last 30 lines of output here>
```

</details>

Failed tests (if any):

| Test Name | Package | Error Summary |
| --------- | ------- | ------------- |
| ___ | ___ | ___ |

### 3.3 E2E Tests

```
Status: ___
Code: ___
Command: make test-e2e
Total: ___ passed / ___ failed / ___ skipped
Duration: ___
```

<details>
<summary>Evidence</summary>

```
<paste last 30 lines of output here>
```

</details>

Failed tests (if any):

| Test Name | Error Summary |
| --------- | ------------- |
| ___ | ___ |

---

## 4. Account Creation & Authentication

### 4.1 Create CRE Account

```
Status: ___
Account email: ___
Organization ID: ___
Access level: ___ (FULL_ACCESS / Gated)
```

Notes: ___

### 4.2 Login

```
Status: ___
Command: ./cre login
```

<details>
<summary>Evidence</summary>

```
<paste output here — redact tokens>
```

</details>

Checklist:

- [ ] Browser opened automatically
- [ ] Login page loaded correctly
- [ ] Redirect back to CLI succeeded
- [ ] `~/.cre/cre.yaml` created
- [ ] File contains AccessToken, RefreshToken, TokenType

Notes: ___

### 4.3 Whoami

```
Status: ___
Command: ./cre whoami
```

<details>
<summary>Evidence</summary>

```
<paste output here>
```

</details>

- [ ] Email matches login account
- [ ] Organization ID shown

### 4.4 Logout

```
Status: ___
Command: ./cre logout
```

<details>
<summary>Evidence</summary>

```
<paste output here>
```

</details>

- [ ] `~/.cre/cre.yaml` deleted
- [ ] `./cre whoami` fails after logout

### 4.5 Auto-Login Prompt

```
Status: ___
Command: ./cre workflow deploy my-workflow (while logged out)
```

- [ ] CLI prompts to log in

### 4.6 API Key Auth

```
Status: ___
Command: CRE_API_KEY=<key> ./cre whoami
```

- [ ] Works without browser login

---

## 5. Project Initialization

### 5.1 Interactive Wizard (Full Flow)

```
Status: ___
Command: ./cre init
Inputs: project=___, language=___, template=___, workflow=___
```

<details>
<summary>Evidence</summary>

```
<paste output here>
```

</details>

- [ ] Directory created
- [ ] `project.yaml` exists
- [ ] `.env` exists
- [ ] Workflow directory exists
- [ ] `workflow.yaml` exists
- [ ] Template files present
- [ ] Success message with Next Steps shown

### 5.2 Non-Interactive (All Flags)

| Template | Command | Status | Files OK |
| -------- | ------- | ------ | -------- |
| Go HelloWorld | `./cre init -p flagged-go -t 2 -w go-wf` | ___ | ___ |
| TS HelloWorld | `./cre init -p flagged-ts -t 3 -w ts-wf` | ___ | ___ |

### 5.3 PoR Template with RPC URL

| Template | Command | Status | RPC in project.yaml | Contracts dir |
| -------- | ------- | ------ | -------------------- | ------------- |
| Go PoR | `./cre init -p por-go -t 1 -w por-wf --rpc-url <url>` | ___ | ___ | ___ |
| TS PoR | `./cre init -p por-ts -t 4 -w por-wf --rpc-url <url>` | ___ | ___ | N/A |

### 5.4 Init Inside Existing Project

```
Status: ___
Command: ./cre init -t 2 -w second-workflow (from inside existing project)
```

- [ ] No project name prompt
- [ ] New workflow dir created
- [ ] Existing `project.yaml` unchanged

### 5.5 Wizard Cancel (Esc)

```
Status: ___
```

- [ ] Clean exit, no partial files

### 5.6 Directory Already Exists — Overwrite Yes

```
Status: ___
```

- [ ] Prompt appeared
- [ ] Old dir removed, fresh project created

### 5.6b Directory Already Exists — Overwrite No

```
Status: ___
```

- [ ] Prompt appeared
- [ ] Aborted with message, old dir intact

---

## 6. Template Validation — Go

### 6.1 Go HelloWorld (Template ID 2)

```
Status: ___
```

| Step | Status | Notes |
| ---- | ------ | ----- |
| Init (`cre init -p go-hello -t 2 -w hello-wf`) | ___ | ___ |
| Build (`go build ./...`) | ___ | ___ |
| Simulate (`cre workflow simulate hello-wf`) | ___ | ___ |

<details>
<summary>Simulate output</summary>

```
<paste output here>
```

</details>

### 6.2 Go PoR (Template ID 1)

```
Status: ___
```

| Step | Status | Notes |
| ---- | ------ | ----- |
| Init | ___ | ___ |
| Build (`go build ./...`) | ___ | ___ |
| Simulate | ___ | ___ |

<details>
<summary>Simulate output</summary>

```
<paste output here>
```

</details>

---

## 7. Template Validation — TypeScript

### 7.1 TS HelloWorld (Template ID 3)

```
Status: ___
```

| Step | Status | Notes |
| ---- | ------ | ----- |
| Init | ___ | ___ |
| Install (`bun install`) | ___ | ___ |
| Simulate | ___ | ___ |

<details>
<summary>Simulate output</summary>

```
<paste output here>
```

</details>

### 7.2 TS PoR (Template ID 4)

```
Status: ___
```

| Step | Status | Notes |
| ---- | ------ | ----- |
| Init | ___ | ___ |
| Install (`bun install`) | ___ | ___ |
| Simulate | ___ | ___ |

<details>
<summary>Simulate output</summary>

```
<paste output here>
```

</details>

---

## 8. Workflow Simulate

| # | Test | Command | Status | Notes |
| - | ---- | ------- | ------ | ----- |
| 8.1 | Basic simulate | `cre workflow simulate hello-wf` | ___ | ___ |
| 8.2a | Non-interactive | `... --non-interactive --trigger-index 0` | ___ | ___ |
| 8.2b | Engine logs | `... -g` | ___ | ___ |
| 8.2c | Verbose | `... -v` | ___ | ___ |
| 8.3 | HTTP trigger | `... --http-payload '{}'` | ___ | ___ |
| 8.5a | Missing dir | `cre workflow simulate nonexistent` | ___ | Expected: error |
| 8.5b | Non-interactive no index | `... --non-interactive` | ___ | Expected: error |
| 8.5c | Bad trigger index | `... --trigger-index 99` | ___ | Expected: error |

---

## 9. Workflow Deploy / Pause / Activate / Delete

> **Pre-req:** Logged in, Sepolia ETH funded, `.env` with `ETH_PRIVATE_KEY`

### 9.1-9.5 Full Lifecycle

| Step | Command | Status | Code | TX Hash | Notes |
| ---- | ------- | ------ | ---- | ------- | ----- |
| Deploy | `cre workflow deploy hello-wf --yes` | ___ | ___ | ___ | ___ |
| Pause | `cre workflow pause hello-wf --yes` | ___ | ___ | ___ | ___ |
| Activate | `cre workflow activate hello-wf --yes` | ___ | ___ | ___ | ___ |
| Delete | `cre workflow delete hello-wf --yes` | ___ | ___ | ___ | ___ |

### 9.2 Deploy Flags

| Flag | Status | Notes |
| ---- | ------ | ----- |
| `--yes` (skip confirm) | ___ | ___ |
| `-o ./out.wasm` (custom output) | ___ | ___ |
| `--unsigned` (raw TX) | ___ | ___ |

---

## 10. Account Key Management

| # | Command | Status | Code | Notes |
| - | ------- | ------ | ---- | ----- |
| 10.1 | `cre account link-key` | ___ | ___ | ___ |
| 10.2 | `cre account list-key` | ___ | ___ | Key visible: ___ |
| 10.3 | `cre account unlink-key` | ___ | ___ | Key removed: ___ |

---

## 11. Secrets Management

| # | Command | Status | Code | Notes |
| - | ------- | ------ | ---- | ----- |
| 11.2 | `cre secrets create test-secrets.yaml` | ___ | ___ | ___ |
| 11.3 | `cre secrets list` | ___ | ___ | Secrets visible: ___ |
| 11.4 | `cre secrets update test-secrets.yaml` | ___ | ___ | ___ |
| 11.5 | `cre secrets delete test-secrets.yaml` | ___ | ___ | ___ |
| 11.6a | `--timeout 72h` (valid) | ___ | ___ | ___ |
| 11.6b | `--timeout 999h` (invalid) | ___ | ___ | Expected: error |

---

## 12. Utility Commands

| # | Command | Status | Notes |
| - | ------- | ------ | ----- |
| 12.1 | `./cre version` | ___ | Version: ___ |
| 12.2 | `./cre update` | ___ | ___ |
| 12.3 | `cre generate-bindings evm` | ___ | ___ |
| 12.4a | `./cre completion bash` | ___ | ___ |
| 12.4b | `./cre completion zsh` | ___ | ___ |

---

## 13. Environment Switching

| # | Environment | Login URL correct | Status |
| - | ----------- | ----------------- | ------ |
| 13.1 | Production (default) | `login.chain.link` | ___ |
| 13.2 | Staging | `login-stage.cre.cldev.cloud` | ___ |
| 13.3 | Development | `login-dev.cre.cldev.cloud` | ___ |
| 13.4 | Individual override | ___ | ___ |

---

## 14. Edge Cases & Negative Tests

### 14.1 Invalid Inputs

| # | Command | Expected Error | Status | Actual |
| - | ------- | -------------- | ------ | ------ |
| 1 | `cre init -p "my project!"` | Invalid name | ___ | ___ |
| 2 | `cre init -w "my workflow"` | Invalid name | ___ | ___ |
| 3 | `cre init -t 999` | Invalid template | ___ | ___ |
| 4 | `cre init --rpc-url ftp://bad` | Invalid URL | ___ | ___ |
| 5 | `cre workflow simulate` (no path) | Missing arg | ___ | ___ |
| 6 | `cre workflow deploy` (no path) | Missing arg | ___ | ___ |
| 7 | `cre secrets create nonexistent.yaml` | File not found | ___ | ___ |

### 14.2 Auth Edge Cases

| # | Test | Status | Notes |
| - | ---- | ------ | ----- |
| 1 | `cre whoami` logged out | ___ | ___ |
| 2 | `cre login` already logged in | ___ | ___ |
| 3 | `cre logout` already logged out | ___ | ___ |
| 4 | Corrupt `~/.cre/cre.yaml` then whoami | ___ | ___ |

---

## 15. Wizard UX

| # | Test | Status | Notes |
| - | ---- | ------ | ----- |
| 1 | Arrow keys navigate language options | ___ | ___ |
| 2 | Arrow keys navigate template options | ___ | ___ |
| 3 | Enter advances step | ___ | ___ |
| 4 | Esc cancels cleanly | ___ | ___ |
| 5 | Ctrl+C cancels cleanly | ___ | ___ |
| 6 | Invalid name shows error on Enter | ___ | ___ |
| 7 | Empty inputs use defaults | ___ | ___ |
| 8 | Logo renders correctly | ___ | ___ |
| 9 | Colors visible on dark background | ___ | ___ |
| 10 | Completed steps shown as dim summary | ___ | ___ |

---

## Summary

| Section | Total | Pass | Fail | Skip | Blocked |
| ------- | ----- | ---- | ---- | ---- | ------- |
| Build & Smoke | ___ | ___ | ___ | ___ | ___ |
| Unit Tests | ___ | ___ | ___ | ___ | ___ |
| E2E Tests | ___ | ___ | ___ | ___ | ___ |
| Authentication | ___ | ___ | ___ | ___ | ___ |
| Init & Templates | ___ | ___ | ___ | ___ | ___ |
| Go Templates | ___ | ___ | ___ | ___ | ___ |
| TS Templates | ___ | ___ | ___ | ___ | ___ |
| Simulate | ___ | ___ | ___ | ___ | ___ |
| Deploy Lifecycle | ___ | ___ | ___ | ___ | ___ |
| Account Mgmt | ___ | ___ | ___ | ___ | ___ |
| Secrets | ___ | ___ | ___ | ___ | ___ |
| Utilities | ___ | ___ | ___ | ___ | ___ |
| Environments | ___ | ___ | ___ | ___ | ___ |
| Edge Cases | ___ | ___ | ___ | ___ | ___ |
| Wizard UX | ___ | ___ | ___ | ___ | ___ |
| **TOTAL** | ___ | ___ | ___ | ___ | ___ |

### Overall Verdict: ___ (PASS / FAIL / PASS WITH EXCEPTIONS)

### Blocking Issues Found

| # | Section | Test | Code | Severity | Description |
| - | ------- | ---- | ---- | -------- | ----------- |
| ___ | ___ | ___ | ___ | ___ | ___ |

### Non-Blocking Issues Found

| # | Section | Test | Code | Severity | Description |
| - | ------- | ---- | ---- | -------- | ----------- |
| ___ | ___ | ___ | ___ | ___ | ___ |

---

_Report generated from `.qa-developer-runbook.md` — CRE CLI_
